<!doctype html>
<html class="no-js" ng-app="mainApp">
    <head>
        <meta charset="utf-8">
        <title>{{app}}</title>
        <meta name="description" content="">
        <meta name=viewport content="width=device-width, initial-scale=1">
        <meta name="mobile-web-app-capable" content="yes">
        <link rel="import" href="imports.html">
        <style type="text/css">
        .true {
        display: block;
        }
        .false {
        display: none;
        }
        
        </style>
    </head>
    <body>
       <body>
        <div id="teste"></div>
        <div id="area-de-sistema" style="display: block;" ng-controller="modelagemCtrl">
            <div class="ui segment">
                <div id="area-de-cabecalho" class="ui vertically divided grid">
                    <div class="ten row">
                        <div class="ten wide column">
                            <h3 class="ui dividing header">
                            Prefeitura Municipal de Parnamirim
                            </h3>
                            <div id="area-de-menu-principal" class="ui tiered menu" style="margin-top: -5px">
                                <div id="barra-de-menu-principal" class="menu" ng-init= "">

                                    <!--
                                        Aba principal do sistema com título Portal Administrativo, quando clicado altera a 'class'
                                        da aba selecionada atualmente e
                                      -->

                                    <a id="aba-do-portal-administrativo" class="item" ng-click="aba=1;tabAplicativo=false" ng-class="{'active':aba==1}"> <i class="rss icon"></i> Portal Administrativo
                                    </a>

                                    <!--
                                        Aba secundária, com o nome da secretaria selecionada na página principal. Ao clicar alterna a variavel de controle da abaPrincipal
                                    -->

                                    <a id="aba-de-aplicativo" class="item"  ng-class="{'active': aba==2}" ng-click="aba=2;tabAplicativo=true;">{{secretariaSelecionada}}</a>


                                    <div class="right menu">
                                        <div class="ui dropdown item">
                                            {{user}}, Mat. 7500
                                            <i class="dropdown icon">
                                            </i>
                                            <div class="menu">
                                                <a id="botao-de-logout-de-sessao" class="item"><i class="sign out icon"></i>Sair</a>
                                                <a class="item"><i class="warning sign icon"></i> Mudar Senha </a>
                                                <a class="item"><i class="comment icon"></i> Suporte </a>
                                                <i class="dropdown icon">
                                                </i>
                                            </div>
                                        </div>
                                    </div>
                                </div>

  
                                <div id="modulos" class="ui menu" ng-class="{'none': tabAplicativo}" ng-init="clickado=true">
                                    <div class="ui dropdown item modulo">
                                        <span contextmenu="secretarias">
                                            <i class="text file icon">
                                            </i>
                                            Secretarias
                                        </span>
                                        <i class="dropdown icon">
                                        </i>


                                        <div id="aplicativos" class="menu barramenuhorizontal" style="margin-top: 1px;">

                                             <!-- LAÇO DE REPETICAO para inserir no menu principal todas as secretarias -->
                                            <a ng-repeat="secretaria in secretarias">
                                                <span class="item sessao itemmenuhorizontal" contextmenu="funcionario" ng-click="trocarAba(secretaria)">{{secretaria}}</span>
                                            </a>
                                        </div>
                                    </div>
                                </div>

                                <div id="sessao" class="ui sub menu none" ng-class="{'block':tabAplicativo}">

                                    <!--
                                        ng-repeat cria todos os submenus de cada secretaria, inicialmente todos estão invisíveis,
                                        ficando visível apenas quando a secretaria é seleciona no menu de secretarias, através da tag
                                        ng-show
                                    -->
                                    <div class="ui dropdown item modulo">
                                        Cadastro
                                        <i class="icon dropdown"></i>
                                        <div class="menu" >
                                            <!--Inserindo os formulário de cada secretaria-->
                                            <a class="item" ng-repeat="formulario in listarFormularioDeSecretaria(secretariaSelecionada) track by $index" ng-click="selecionarFormulario(formulario);segmentos(secretariaSelecionada,formulario)">{{formulario}}</a>
                                        </div>
                                    </div>

                                    <!-- MENU FIXO DE NOTIFICAÇÕES, FUTURAMENTE SERÁ ALTERADO -->

                                    <div class="ui dropdown item">
                                        Notificações <i class="icon dropdown"></i>
                                        <div class="menu">
                                            <a class="item">
                                            <i class="mail icon"></i> Enviar e-Mail</a>
                                            <a class="item">
                                            <i class="phone icon"></i> Número: (84) 3644 8125</a>
                                            <a class="item">
                                                s<i class="chat icon"></i> Chamar
                                            on-line</a>
                                        </div>
                                    </div>

                                    <!-- MENU FIXO DE RELATÓRIOS, FUTURAMENTE SERÁ ALTERADO -->


                                    <div class="ui dropdown item">
                                        Relatórios <i class="icon dropdown"></i>
                                        <div class="menu">
                                            <a class="item"><i class="mail icon"></i> Enviar e-Mail</a>
                                            <a class="item"><i class="phone icon"></i> Número: (84) 3644 8125</a>
                                            <a class="item"><i class="chat icon"></i> Chamar on-line</a>
                                        </div>
                                    </div>

                                    <!-- MENU FIXO NO LADO DIRETO, FUTURAMENTE SERÁ ALTERADO -->

                                    <div class="right menu" id="utilidades">
                                        <a id="formulario" class="ui dropdown item">
                                        <i class="edit icon"></i> Formulário</a>
                                        <a id="listagem" class="item modo-de-exibicao">
                                        <i class="list layout icon"></i>Listagem</a>
                                        <a id="mapa" class="item modo-de-exibicao">
                                            <i class="map icon">
                                        </i>Mapa</a>
                                    </div>
                                </div>


                                <!--
                                BLOCO DE  E FORMULARIOS COMECAM AQUI
                                 -->

                                <div ng-show="mostrarForms()">
                                <!-- mostrada apenas quando o segmentView for igual a secretaria atual, segmentView é alterado aproximadamente na linha 105 desse código (está comentado)-->
                                    <div class="ui celled grid">
                                        <div class="row">
                                            <div class="one wide column">
                                                <div class="ui segiment">
                                                    <div id="grupo-de-dados" class="ui pointing vertical menu" ng-repeat="(key,value) in campoDeFormulario">
                                                        <!-- OS  COMEÇAM AQUI-->
                                                        <a contextmenu="dados-pessoais" class="item menu"> {{key}}</a>
                                                        <!-- OS  TERMINAM AQUI -->
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- BLOCO DE FORMULARIOS COMECAM AQUI -->

                                            <!--
                                            ESSA BLOCO É EXATAMETNE OQ UE ESTÁ FALTANDO SER IMPLEMENTADO, A CRIAÇÃO DOS FORMULÁRIOS
                                            DE ACORDO COM O JSON FORNECIDO -->
                                            <div class="twelve wide column">
                                                <div id="dados-pessoais" class="sessao-de-dados">
                                                    <div class="ui form segment" >
                                                        <div class="ui ribbon label" style="margin-bottom: 15px;">
                                                           SESSÃO DE DADOS: {{formularioSelecionado | uppercase}}
                                                        </div>
                                                      <div ng-repeat="(key,value) in campoDeFormulario">
                                                          <div class="field" id="{{value.id}}" ng-repeat="field in value.fields track by $index">
                                                              <div ng-repeat="(key,value) in field" id={{key}}>
                                                                {{renderizar(key,value)}}
                                                              </div>
                                                          </div>
                                                      </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                <!-- BLOCO DE  E FORMULARIOS TERMINAM AQUI -->
                              </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    
    <!-- build:js scripts/vendor.js -->
    <!-- bower:js -->
    <!-- <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="js/semantic.js"></script>
    <script src="js/script.js"></script> -->
    <!-- endbower -->
    <!-- endbuild -->
</body>
    </body>
</html>